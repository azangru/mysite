<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Live editing of a dockerized project</title>
    
    <link href="../../../../stylesheets/normalize.css" rel="stylesheet" type="text/css" /><link href="../../../../stylesheets/all.css" rel="stylesheet" type="text/css" />
    <link href="../../../../stylesheets/code.css" rel="stylesheet" type="text/css" />

    <link href='http://fonts.googleapis.com/css?family=PT+Serif&subset=latin,cyrillic,cyrillic-ext,latin-ext' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <script src="../../../../javascripts/all.js" type="text/javascript"></script>
  </head>
  
  <body>
    <div class='hvr-wobble-vertical' id='open-sidebar-button'>
  <svg height='32px' id='Layer_1' space='preserve' style='enable-background:new 0 0 32 32;' version='1.1' viewbox='0 0 32 32' width='32px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>
    <path d='M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z'></path>
  </svg>
</div>

    <div class='closed-sidebar' id='sidebar-menu'>
  <div id='close-sidebar-button'>
    X
  </div>
  <ul>
    <li>
      <a href="../../../../about.html">about me</a>
    </li>
    <li>
      <a href="../../../../projects.html">projects</a>
    </li>
    <li>
      <a href="../../../">blog</a>
    </li>
    <li>
      <a href="../../../../other.html">other</a>
    </li>
  </ul>
</div>

    <main class="with-sidemenu-closed">
      <div class="content">
        <div id="blog-article">
          <h1>Live editing of a dockerized project</h1>
          <div class="date">
            August  8, 2015
          </div>
          <p>Docker is awesome. It isolates software in independent containers, which behave like virtual machines, only without huge drain of system resources.</p>

<p>It can be used for web development, too. A Dockerfile placed in the root of the project directory will contain instructions for building a Docker image and, when a container is spun from this image, for starting necessary services in that container.</p>

<p>An important Dockerfile command is <a href="https://docs.docker.com/reference/builder/#add"><code>ADD</code></a>.</p>
<div class="highlight plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>ADD &lt;src&gt; &lt;dest&gt;
</pre></td></tr></tbody></table>
</div>

<p>for example, <code>ADD . /app</code> will add all the contents of the project folder to the folder <code>/app</code> of the Docker image. The Docker image will thus contain all the project files, and so will the Docker container.</p>

<p>But here is the catch. A docker image (and, by extension, a docker container) is just a snapshot of the current state of the project folder. Is it possible to continue developing while running the project in a Docker container?</p>

<p>Turns out it is. Enter volume mounting. Imagine that a Docker image is run using docker-compose. If a .yml file for docker-compose contains the following instruction:</p>
<div class="highlight plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>volumes:
 - &lt;name of the directory&gt;
</pre></td></tr></tbody></table>
</div>

<p>then the container will have an access to this directory on the host file system.</p>

<p>Consider the following scenario:</p>

<p>We develop a node app that uses MongoDB in a Docker container. We build a image of our app using Dockerfile that, among other instructions, includes the following: <code>ADD . /app</code>. This instruction adds the contents of the project folder to the folder <code>/app</code> of the container. When run independently, this container will be self-sufficient and will serve our app.</p>

<p>Now what if we run this image using docker-compose and the following yml file:</p>
<div class="highlight plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre>app:
  build: .
  ports:
   - "5000:4568"
  volumes:
   - .:/app
  links:
   - mongo

mongo:
  image: mongo:latest
</pre></td></tr></tbody></table>
</div>

<p>The app will run (and will be accessible on port 5000 of the host). Importantly, the <code>volumes</code> instruction of the yml file used for docker-compose will tell the container to treat the root folder of the project on the host file system <em>as if it were the /app folder inside of this container</em>. This means that now developers can edit files in the project folder, and the container will immediately see these changes. And they will immediately appear in the browser, on port 5000.</p>

<p>And that is super cool!</p>

        </div>
      </div>
    </main>
  </body>
</html>
