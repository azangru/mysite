<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Getting rid of hashes in url when using frontend frameworks</title>
    
    <link href="../../../../stylesheets/normalize.css" rel="stylesheet" type="text/css" /><link href="../../../../stylesheets/all.css" rel="stylesheet" type="text/css" />
    <link href="../../../../stylesheets/code.css" rel="stylesheet" type="text/css" />

    <link href='http://fonts.googleapis.com/css?family=PT+Serif&subset=latin,cyrillic,cyrillic-ext,latin-ext' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <script src="../../../../javascripts/all.js" type="text/javascript"></script>
  </head>
  
  <body>
    <div class='hvr-wobble-vertical' id='open-sidebar-button'>
  <svg height='32px' id='Layer_1' space='preserve' style='enable-background:new 0 0 32 32;' version='1.1' viewbox='0 0 32 32' width='32px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>
    <path d='M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z'></path>
  </svg>
</div>

    <div class='closed-sidebar' id='sidebar-menu'>
  <div id='close-sidebar-button'>
    X
  </div>
  <ul>
    <li>
      <a href="../../../../about.html">about me</a>
    </li>
    <li>
      <a href="../../../../projects.html">projects</a>
    </li>
    <li>
      <a href="../../../">blog</a>
    </li>
    <li>
      <a href="../../../../other.html">other</a>
    </li>
  </ul>
</div>

    <main class="with-sidemenu-closed">
      <div class="content">
        <div id="blog-article">
          <h1>Getting rid of hashes in url when using frontend frameworks</h1>
          <div class="date">
            August 29, 2015
          </div>
          <p>In the days of yore, javascript-based frontend frameworks used hash urls for routing. So if the root url for the application were <code>www.myapp.com</code>, then the url to render the About page would be something like <code>www.myapp.com/#about</code>.</p>

<p>As a user, I would find this hash symbol annoying. Hash urls are noticeably different from urls used on other websites, and from the user’s perspective, this hash sign in urls is just a superfluous character that doesn’t serve any purpose. From the developer’s perspective it is a sign proclaiming that this particular web app has a frontend framework — a completely unnecesary knowledge to give to the user.</p>

<p>And it’s not just me. Developers of React router, for example, <a href="https://rackt.github.io/react-router/#HistoryLocation">suggest</a> to avoid such urls and prefer the “normal”-looking urls instead. “We recommend you use this&hellip;” say the React router’s devs about their solution. “It has better looking URLs&hellip;”</p>

<p>Well, I couldn’t agree more.</p>

<p>So how to get rid of this hash?</p>

<p>The solution relies on <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API">HTML5 History API</a> and requires some tweaks on the server side and client side.</p>

<h2>Server Side</h2>

<p>The server has to respond to all GET requests (apart from those that need some special server-side logic) by rendering the main view of the app and letting the frontend framework take over from there. In Express, for example, which uses <code>ejs</code> templating engine, this is achieved like this:</p>
<div class="highlight javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">'index.ejs'</span><span class="p">);</span>
<span class="p">});</span>
</pre></td></tr></tbody></table>
</div>

<h2>Client Side</h2>

<h3>Angular</h3>

<p>1) Add <base href="/" /> to the head of <code>index.html</code>.</p>

<p>2) Add the following to the <code>.config</code> property of the <code>angular</code> module:</p>
<div class="highlight javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$locationProvider</span><span class="p">){</span>
    <span class="nx">$locationProvider</span><span class="p">.</span><span class="nx">html5Mode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</pre></td></tr></tbody></table>
</div>

<p>That’s it.</p>

<h3>React</h3>

<p>React router has a <code>HistoryLocation</code> component, which needs to be provided to React’s <a href="https://rackt.github.io/react-router/#Router.run"><code>Router.run</code></a> API. This is as simple as:</p>
<div class="highlight javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">'react/addons'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Router</span> <span class="nx">from</span> <span class="s1">'react-router'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">routes</span> <span class="nx">from</span> <span class="s1">'./routes.jsx'</span><span class="p">;</span>

<span class="nx">Router</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">routes</span><span class="p">,</span> <span class="nx">Router</span><span class="p">.</span><span class="nx">HistoryLocation</span><span class="p">,</span> <span class="p">(</span><span class="nx">Handler</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">React</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">Handler</span><span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'app'</span><span class="p">));</span>
<span class="p">});</span>
</pre></td></tr></tbody></table>
</div>

        </div>
      </div>
    </main>
  </body>
</html>
